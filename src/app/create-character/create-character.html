<div class="create-character-container">
  <!-- Mobile: Hamburger Menu -->
  <div class="mobile-header">
    <button
      type="button"
      class="hamburger-button"
      (click)="toggleMobileDrawer()"
      aria-label="Toggle navigation menu"
      [attr.aria-expanded]="mobileDrawerOpen()"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>
    <h1 class="mobile-title">Create Character</h1>
  </div>

  <!-- Mobile: Slide-out Drawer -->
  @if (mobileDrawerOpen()) {
    <div
      class="mobile-drawer-overlay"
      (click)="closeMobileDrawer()"
      role="presentation"
    ></div>
  }
  <nav
    class="mobile-drawer"
    [class.open]="mobileDrawerOpen()"
    [attr.aria-hidden]="!mobileDrawerOpen()"
  >
    @for (tab of tabs; track tab.id) {
      <button
        type="button"
        [class.active]="activeTab() === tab.id"
        (click)="selectTab(tab.id)"
        class="drawer-item"
        [attr.aria-label]="'Navigate to ' + tab.label + ' tab'"
        [attr.aria-current]="activeTab() === tab.id ? 'page' : null"
      >
        {{ tab.label }}
      </button>
    }
  </nav>

  <!-- Main Content Area -->
  <main class="content-area" role="main">
    <!-- Parchment Container -->
    <div class="parchment-container">
      <!-- Desktop: Folder Tabs on Right -->
      <div class="desktop-tabs">
        @for (tab of tabs; track tab.id) {
          <button
            type="button"
            [class.active]="activeTab() === tab.id"
            (click)="selectTab(tab.id)"
            class="folder-tab"
            [attr.aria-label]="'Navigate to ' + tab.label + ' tab'"
            [attr.aria-current]="activeTab() === tab.id ? 'page' : null"
          >
            {{ tab.label }}
          </button>
        }
      </div>
      <!-- Name and Pronouns (Always Visible) -->
      <form [formGroup]="characterForm" class="character-info-form">
        <div class="form-row">
          <div class="form-field">
            <label for="character-name" class="form-label">
              Character Name
              <span class="required-indicator" aria-label="required">*</span>
            </label>
            <input
              id="character-name"
              type="text"
              formControlName="name"
              class="form-input"
              [class.invalid]="isFieldInvalid('name')"
              [attr.aria-invalid]="isFieldInvalid('name')"
              [attr.aria-describedby]="isFieldInvalid('name') ? 'name-error' : null"
            />
            @if (isFieldInvalid('name')) {
              <span id="name-error" class="error-message" role="alert">
                Character name is required
              </span>
            }
          </div>

          <div class="form-field">
            <label for="character-pronouns" class="form-label">
              Pronouns
              <span class="required-indicator" aria-label="required">*</span>
            </label>
            <input
              id="character-pronouns"
              type="text"
              formControlName="pronouns"
              class="form-input"
              [class.invalid]="isFieldInvalid('pronouns')"
              [attr.aria-invalid]="isFieldInvalid('pronouns')"
              [attr.aria-describedby]="isFieldInvalid('pronouns') ? 'pronouns-error' : null"
            />
            @if (isFieldInvalid('pronouns')) {
              <span id="pronouns-error" class="error-message" role="alert">
                Pronouns are required
              </span>
            }
          </div>
        </div>
      </form>

      <!-- Tab Content Placeholder -->
      <div class="tab-content" role="region" [attr.aria-label]="activeTab() + ' section'">
        @switch (activeTab()) {
          @case ('class') {
            <p class="placeholder-text">Class selection coming soon...</p>
          }
          @case ('heritage') {
            <p class="placeholder-text">Heritage selection coming soon...</p>
          }
          @case ('traits') {
            <p class="placeholder-text">Traits selection coming soon...</p>
          }
          @case ('additional-info') {
            <p class="placeholder-text">Additional info coming soon...</p>
          }
          @case ('starting-equipment') {
            <p class="placeholder-text">Starting equipment coming soon...</p>
          }
          @case ('background') {
            <p class="placeholder-text">Background selection coming soon...</p>
          }
          @case ('experiences') {
            <p class="placeholder-text">Experiences selection coming soon...</p>
          }
          @case ('domain-cards') {
            <p class="placeholder-text">Domain cards coming soon...</p>
          }
          @case ('connections') {
            <p class="placeholder-text">Connections coming soon...</p>
          }
        }
      </div>
    </div>
  </main>
</div>
