<div class="create-character-container">
  <div class="page-grain" aria-hidden="true"></div>

  <main class="content-area" role="main">
    <div class="parchment-container">
      <app-character-form [selections]="characterSelections()" />

      <app-tab-nav
        [tabs]="tabs"
        [activeTab]="activeTab()"
        [completedSteps]="completedSteps()"
        (tabSelected)="onTabSelected($event)"
      />

      <div
        class="tab-content"
        role="tabpanel"
        [id]="'panel-' + activeTab()"
        [attr.aria-labelledby]="'tab-' + activeTab()"
      >
        @switch (activeTab()) {
          @case ('class') {
            <app-card-selection-grid
              [cards]="classCards()"
              [loading]="classCardsLoading()"
              [error]="classCardsError()"
              [selectedCard]="selectedClassCard()"
              [skeletonCount]="9"
              [collapsibleFeatures]="true"
              layout="wide"
              (cardSelected)="onCardClicked($event)"
            />
          }
          @case ('subclass') {
            @if (subclassCardsLoading()) {
              <app-card-skeleton [count]="4" />
            } @else if (subclassCardsError()) {
              <app-card-error />
            } @else {
              <app-subclass-path-selector
                [cards]="subclassCards()"
                [selectedCard]="selectedSubclassCard()"
                (cardSelected)="onCardClicked($event)"
              />
            }
          }
          @case ('ancestry') {
            <p class="placeholder-text">Ancestry selection coming soon...</p>
          }
          @case ('community') {
            <p class="placeholder-text">Community selection coming soon...</p>
          }
          @case ('traits') {
            <p class="placeholder-text">Traits selection coming soon...</p>
          }
          @case ('starting-equipment') {
            <p class="placeholder-text">Starting equipment coming soon...</p>
          }
          @case ('background') {
            <p class="placeholder-text">Background selection coming soon...</p>
          }
          @case ('experiences') {
            <p class="placeholder-text">Experiences selection coming soon...</p>
          }
          @case ('domain-cards') {
            <p class="placeholder-text">Domain cards coming soon...</p>
          }
        }
      </div>
    </div>
  </main>
</div>
