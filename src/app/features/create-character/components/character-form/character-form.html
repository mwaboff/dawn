<form [formGroup]="characterForm" class="character-info-form">
  <div class="form-row">
    <div class="form-field">
      <label for="character-name" class="form-label">
        Character Name
        <span class="required-indicator" aria-label="required">*</span>
      </label>
      <input
        id="character-name"
        type="text"
        formControlName="name"
        class="form-input"
        [class.invalid]="isFieldInvalid('name')"
        [attr.aria-invalid]="isFieldInvalid('name')"
        [attr.aria-describedby]="isFieldInvalid('name') ? 'name-error' : null"
      />
      @if (isFieldInvalid('name')) {
        <span id="name-error" class="error-message" role="alert">
          Character name is required
        </span>
      }
    </div>

    <div class="form-field">
      <label for="character-pronouns" class="form-label">
        Pronouns
      </label>
      <input
        id="character-pronouns"
        type="text"
        formControlName="pronouns"
        class="form-input"
        placeholder="e.g. they/them"
      />
    </div>
  </div>

  @if (hasSelections()) {
    <div class="selections-summary" role="list" aria-label="Character selections">
      @if (selections().class) {
        <div class="selection-tag" role="listitem">
          <span class="selection-label">Class</span>
          <span class="selection-value">{{ selections().class }}</span>
        </div>
      }
      @if (selections().subclass) {
        <div class="selection-tag" role="listitem">
          <span class="selection-label">Subclass</span>
          <span class="selection-value">{{ selections().subclass }}</span>
        </div>
      }
      @if (selections().ancestry) {
        <div class="selection-tag" role="listitem">
          <span class="selection-label">Ancestry</span>
          <span class="selection-value">{{ selections().ancestry }}</span>
        </div>
      }
      @if (selections().community) {
        <div class="selection-tag" role="listitem">
          <span class="selection-label">Community</span>
          <span class="selection-value">{{ selections().community }}</span>
        </div>
      }
    </div>
  }
</form>
